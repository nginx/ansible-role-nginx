---
- name: "(Install: FreeBSD) Install NGINX port"
  portinstall:
    name: "{{ nginx_freebsd_package }}"
    state: present
  register: result
  retries: "{{ nginx_install_retries }}"
  until: result is succeeded
  delay: "{{ nginx_install_delay }}"
  notify: "(Handler: All OSs) Start NGINX"
  when: nginx_freebsd_install_method|lower == 'ports'

- name: "(Install: FreeBSD) Install NGINX package"
  pkgng:
    name: "{{ nginx_freebsd_package }}"
    state: present
  register: result
  retries: "{{ nginx_install_retries }}"
  until: result is succeeded
  delay: "{{ nginx_install_delay }}"
  notify: "(Handler: All OSs) Start NGINX"
  when: nginx_freebsd_install_method|lower == 'packages'

- name: "(Install: FreeBSD) Install NGINX extra ports"
  portinstall:
    name: "{{ item }}"
    state: present
  register: result
  retries: "{{ nginx_install_retries }}"
  until: result is succeeded
  delay: "{{ nginx_install_delay }}"
  loop: "{{ nginx_freebsd_extra_packages }}"
  notify: "(Handler: All OSs) Start NGINX"
  when: nginx_freebsd_install_method|lower == 'ports'

- name: "(Install: FreeBSD) Install NGINX packages"
  pkgng: 
    name: "{{ nginx_freebsd_extra_packages }}"
    state: present
  register: result
  retries: "{{ nginx_install_retries }}"
  until: result is succeeded
  delay: "{{ nginx_install_delay }}"
  notify: "(Handler: All OSs) Start NGINX"
  when: nginx_freebsd_install_method|lower == 'packages'
